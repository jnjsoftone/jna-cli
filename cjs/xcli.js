#!/usr/bin/env node
"use strict";var e;let a,r,o;Object.defineProperty(exports,"__esModule",{value:!0});const t=(e=require("yargs"))&&e.__esModule?e:{default:e},s=require("jnu-abc"),i=require("./cli.js"),n="||",l=`${n}${n}`,p=`${n}${n}`,d=t.default.usage("Usage: -e <command> -r <required> -o <optional>").option("e",{alias:"exec",describe:"Execute Command",type:"string",demandOption:!0}).option("r",{alias:"requiredParameter",default:"",describe:"Required Parameter",type:"string"}).option("o",{alias:"optionalParameter",default:"{}",describe:"Optional Parameter",type:"string"}).option("s",{alias:"saveOption",default:"",describe:"Save file for result(return)",type:"string"}).parseSync(),c={exec:d.e,requiredParameter:d.r,optionalParameter:d.o,saveOption:d.s},u=(e,a,r=n)=>{let o=a.split(r);return e&&e.split(r).forEach((e,a)=>{e&&(o[a]=e)}),o},m=(e,a,r=n)=>u(e,a,r),$=(e,a,r=`options.json${n}json${n}1`,o=n)=>{let[t,i,l]=u(a,r,o);switch(console.log(`@@@saveOption: ${a}`),i){case"file":(0,s.saveFile)(t,e),l&&console.log(`${e}`);break;case"json":(0,s.saveJson)(t,e),l&&console.log(`${JSON.stringify(e)}`);break;case"sqlite":console.log(`saveSqlite: ${t}, ${e}`),l&&console.log(`${JSON.stringify(e)}`);break;default:console.log(`save type is not supported: ${i}`)}};(async()=>{switch(c.exec){case"init":r=`repoName${n}jnjsoftone${n}node-simple${n}JnJ Utility For Development`,o=m(c.requiredParameter??"",r,n),$(a=await (0,i.initApp)({template:o[2],repoName:o[0],userName:o[1],description:o[3]}),c.saveOption??"",l);break;case"remove":r=`repoName${n}jnjsoftone`,o=m(c.requiredParameter??"",r,n),(0,i.removeApp)({repoName:o[0],userName:o[1]});break;case"zip":let[e,t]=m(c.requiredParameter??`"${n}node_modules/,package-lock.json,.next/"`,n);console.log(`@@@@ zipFolder: ${e}, zipExcluded: ${t}`),$(a=(0,i.zip)(e,t),c.saveOption??"",l);break;case"tree":(0,i.tree)(c.requiredParameter??""),$(a,c.saveOption??"",p);break;case"find":let[d,u]=m(c.requiredParameter??`"${n}"`,n);(0,s.findFiles)(d,u),$(a,c.saveOption??"",p);break;case"del":let[g,v]=m(c.requiredParameter??`"${n}node_modules/,package-lock.json,.git/.next/"`,n);$(a=(0,s.deleteFilesInFolder)(g,v,!0)??"",c.saveOption??"",l);break;case"unzip":let[f,b]=m(c.requiredParameter??`"${n}node_modules/,package-lock.json,.git/.next/"`,n);$(a=(0,i.unzip)(f,b),c.saveOption??"",p);break;default:console.log("Invalid command")}})();